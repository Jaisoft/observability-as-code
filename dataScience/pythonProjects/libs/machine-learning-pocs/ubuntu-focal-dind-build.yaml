apiVersion: v1
kind: Pod
metadata:
  labels:
    some-label: ubuntu-focal-dind
# python3-minimal python3-pip curl unzip tar gzip
# openjdk-11-jre-headless mvn-3.8.3
# azure-cli kubectl awscli helm kubelogin
spec:
  containers:
  - name: docker-build
    image: articloudpro-ofc-fw2-docker.jfrog.io/ubuntu_focal_dind:latest
    command:
    - "/bin/sh"
    - "-c"
    args:
    - "dockerd"
    tty: true
    volumeMounts:
    - name: dockersock
      mountPath: /var/run/docker.sock
    resources:
      requests:
        cpu: "100m"
        memory: "400Mi"
      limits:
        cpu: "500m"
        memory: "2000Mi"

    securityContext:
      privileged: true
      runAsUser: 0
      runAsGroup: 0

  volumes:
  - name: dockersock
    hostPath:
      path: /var/run/docker.sock
  
  imagePullSecrets:
  - name: regcred